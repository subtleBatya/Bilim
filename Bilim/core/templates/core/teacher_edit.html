{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BILIM Teacher Edit</title>
  {% include "core/static_files/links.html"%}
  <link rel="stylesheet" href="{% static "core/css/teacher_edit.css"%}">

  <style>
    .photo-container {
        position: relative;
        cursor: pointer;
        display: inline-block;
        border-radius: 50%;
        width: 300px;
        height: 300px;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #f8f9fa;
        overflow: hidden;
    }

    .photo-wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .photo-container img {
        border-radius: 50%;
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease-in-out;
    }

    .photo-icon {
        font-size: 3rem;
        color: #aaa;
    }

    .photo-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(255, 255, 255, 0.6);
        opacity: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: opacity 0.3s ease-in-out;
    }

    .plus-sign {
        font-size: 4rem;
        color: rgba(2, 2, 31, 0.6);
        font-weight: bold;
    }

    .photo-container:hover .photo-overlay {
        opacity: 1;
    }
</style>
</head>
<body>
  {% include "core/hero.html" with content="Update your profile Teacher" image_path="core/images/course.webp"%}
<link rel="stylesheet" href="{% static "core/css/teacher_edit.css"%}">
<div class=" text-center mx-auto" style="width: 90vw;">
    <hr class="p-3">
</div>
<form action="" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="mx-auto d-flex" style="width: 90vw;">
    <div class="mt-2 d-flex align-items-center">
        <div class="">
            <img src="{% if request.user.user_avatar %} {{ request.user.user_avatar }} {% else %} {% static "core/images/default_profile_image.png"%} {% endif %}" alt="" style="width: 15vw;">
            <div class="container mt-4">
                    <input type="file" class="form-control" id="image" name="image" accept="image/*">
                </div>
            </div>
        </div>
        <div class="d-block ms-4 w-50">
    
            <div class="row align-items-center pb-3">
                <label class="h5 col fw-semibold form-check-label">
                    <i class="bi bi-person-fill me-2 text-primary"></i>Nickname:</label>
                <div class="h6 col text-small ms-1">
                    <input name="username" class="form-control rounded-1" type="text" placeholder="Nickname" value="{{request.user.username}}">
                </div>
            </div>
        
            <div class="row align-items-center pb-3">
                <label class="h5 col fw-semibold form-check-label">
                    <i class="bi bi-briefcase-fill me-2 text-success"></i>Job:</label>
                <div class="h6 col text-small ms-1">
                    <input name="job" class="form-control rounded-1" type="text" placeholder="Job" value="{% if request.user.job %}{{request.user.job}}{% else %}{% endif %}">
                </div>
            </div>
        
            <div class="row align-items-center">
                <label class="h5 col fw-semibold form-check-label">
                    <i class="bi bi-telephone-fill me-2 text-danger"></i>Phone number:</label>
                <div class="h6 col text-small ms-1">
                    <input name="phone_number" class="form-control rounded-1" type="text" placeholder="Phone number" pattern="^\+993[0-9]{8}$" id="tel_number" value="{% if request.user.telephone_number %} {{request.user.telephone_number }} {% else %}{% endif %}">
                </div>
            </div>
        
        </div>
        
    </div>
</div>
<div class=" justify-content-end mx-auto text-end" style="width: 90vw;">
    <button class="text-white px-4 py-1 rounded-3 fw-semibold downloader" style="border: none;">Save</button>
</div>
</form>
<!-- Bootstrap JS and Popper.js -->
 {% include "core/footer.html"%}
{% include "core/static_files/scripts.html"%}


<script>
    // Initialize selectedAbilities dynamically based on elements with "active" class
function initializeSelectedAbilities() {
    selectedAbilities = Array.from(document.getElementsByClassName("active")).map(
        element => element.id.replace("Card", "") // Extract actual field name
    );
    document.getElementById("selectedAbilities").value = selectedAbilities.join(",");
}

function toggleField(fieldId) {
    const card = document.getElementById(fieldId + "Card");

    if (selectedAbilities.includes(fieldId)) {
        // Remove ability from selection
        selectedAbilities = selectedAbilities.filter(item => item !== fieldId);
        card.classList.remove('active');
    } else {
        if (selectedAbilities.length < 3) {
            // Add ability to selection
            selectedAbilities.push(fieldId);
            card.classList.add('active');
        } else {
            alert("You can select a maximum of 3 fields.");
        }
    }

    // Update hidden input field
    document.getElementById("selectedAbilities").value = selectedAbilities.join(",");
}

// // Run initialization when the page loads
// document.addEventListener("DOMContentLoaded", initializeSelectedAbilities);


//         function updatePhotoPreview(event) {
//             const file = event.target.files[0];
//             if (file) {
//                 const reader = new FileReader();
//                 reader.onload = function (e) {
//                     const photoPreview = document.getElementById('photoPreview');
//                     const photoIcon = document.getElementById('photoIcon');

//                     photoPreview.src = e.target.result;
//                     photoPreview.style.display = 'block';
//                     photoIcon.style.display = 'none';
//                 };
//                 reader.readAsDataURL(file);
//             }
//         }

    // Ensure the script runs when the page loads
document.addEventListener("DOMContentLoaded", function () {
    initializeSelectedAbilities();
    setupHoverEffect();
});

function updatePhotoPreview(event) {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
            const photoPreview = document.getElementById('photoPreview');
            const photoIcon = document.getElementById('photoIcon');

            // Set image source & make it visible
            photoPreview.src = e.target.result;
            photoPreview.style.display = 'block';

            // Hide the plus icon
            if (photoIcon) {
                photoIcon.style.display = 'none';
            }
        };
        reader.readAsDataURL(file);
    }
}

// Function to set up hover effect correctly
function setupHoverEffect() {
    const photoContainer = document.querySelector('.photo-container');
    const photoOverlay = document.querySelector('.photo-overlay');

    if (photoContainer && photoOverlay) {
        // Show overlay on hover
        photoContainer.addEventListener('mouseenter', function () {
            photoOverlay.style.opacity = '1';
        });

        // Hide overlay when mouse leaves
        photoContainer.addEventListener('mouseleave', function () {
            photoOverlay.style.opacity = '0';
        });
    }
}

    </script>
</body>

</html>